<head>
    <title>Pi 5 Server</title>
</head>

<body>
    <h1>Robot Calibration</h1>
    <button onclick="">Start Calibration</button>
    <p id="distance">Distance: </p>

    <button onclick="showPreview()">Show Preview</button>
    <img id="preview" src="" alt="Preview"/>

    <script type="text/javascript">
        let dist = document.getElementById("distance");
        let preview = document.getElementById("preview");
        
        function showPreview() {
            fetch("/preview", {
                method: "POST",
                headers: {
                    "Content-type": "application/json; charset=UTF-8"
                }
                })
                .then(response => response.json())
                .then(data => {
                    preview.src = data.preview;
                });
        }

        function update() {
            fetch("/distance", {
                method: "POST",
                headers: {
                    "Content-type": "application/json; charset=UTF-8"
                }
                })
                .then(response => response.json())
                .then(data => {
                    dist.innerHTML = `Distance: ${data.distance}`;
                });

            setTimeout("update();", 1000);
        }

        update();
    </script>
</body>