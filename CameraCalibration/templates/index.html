<head>
    <title>Pi 5 Server</title>
    <link rel="stylesheet" href="{{url_for('static', filename='index.css')}}">
</head>

<body>
    <h1>Robot Calibration</h1>
    
    <div class="box">
        <button id="preview-button" onclick="showPreview()">Show Preview</button>
        <span id="preview-frame">
            <p id="update-label">Update Interval: </p>
            <input id="update-slider" type="range" min=100 max=1000 value=500 />
            <canvas id="preview" alt="Preview"></canvas>
            <p id="colors">Selecting Colours: false</p>
            <input id="color-select" onclick="colorSelect();" type="checkbox">
            <button onclick="colorSelect()">Clear Colours</button>
            <button onclick="calibrateColors()">Calibrate Colours</button>
        </span>
    </div>

    <div id="measurements" class="box">
        <p id="detected-label">Detected: </p>
        <p id="radius-label">Radius: </p>
        <p id="distance-label">Estimated Distance: </p>
        <p id="x-label">Estimated X: </p>
        <p id="angle-label">Estimated Angle: </p>
        <p id="measure-label">Measure every 1s</p>
        <input id="measure-slider" type="range" min=100 max=1000 value=1000 />
    </div>
    
    <div class="calibration-frames">
    <span class="calibration-frame">
        <div id="calibrate-dist-start" class="box">
            <button id="calibrate-dist-button" onclick="calibrateDistNext()">Calibrate Distance</button>
            <img id="output-dist-graph" style="width:100%; max-width:50rem"></img>
        </div>
        
        <div class="box">
            <p id="equation-dist-label">Equation: </p>
        </div>
        
        <div id="calibration-dist" class="box">
            <button onclick="calibrateDistNext()">Next</button>
            <p id="calibrate-dist-label"></p>
        </div>
    </span>

    <span class="calibration-frame">
        <div id="calibrate-angle-start" class="box">
            <button id="calibrate-angle-button" onclick="calibrateAngleNext()">Calibrate Angle</button>
            <img id="output-angle-graph" style="width:100%; max-width:50rem"></img>
        </div>
        
        <div class="box">
            <p id="equation-angle-label">Equation: </p>
        </div>
        
        <div id="calibration-angle" class="box">
            <button onclick="calibrateAngleNext()">Next</button>
            <p id="calibrate-angle-label"></p>
        </div>
    </span>
    </div>

    <script type="text/javascript" src="{{url_for('static', filename='index.js')}}"></script>
    <script type="text/javascript" src="{{url_for('static', filename='dist.js')}}"></script>
    <script type="text/javascript" src="{{url_for('static', filename='angle.js')}}"></script>
    <script type="text/javascript">
        updateDistEquation("{{k}}", "{{a}}");
        updateAngleEquation("{{m}}", "{{c}}");
    </script>
</body>
